(this["webpackJsonpmelodia-ts"]=this["webpackJsonpmelodia-ts"]||[]).push([[7],{146:function(e,t,c){"use strict";c.r(t);var n=c(14),a=c(18),s=c(0),r=c.n(s),l=c(28),i=c(13),u=c(139),j=c(31),o=c(12),b=c(9);var O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,c=Object(s.useState)(e),n=Object(a.a)(c,2),r=n[0],l=n[1];return Object(s.useEffect)((function(){var c=setTimeout((function(){l(e)}),t);return function(){clearTimeout(c)}}),[e]),r},h=c(1),d=function(e){var t=e.HotKey,c=e.handleCancel,n=e.handleSearch,r=e.setShowHotkey,l=Object(s.useRef)(document.createElement("input")),i=Object(s.useState)(""),u=Object(a.a)(i,2),j=u[0],b=u[1];O(j);return Object(s.useEffect)((function(){l.current.focus()}),[]),Object(s.useEffect)((function(){r(0===j.length)}),[j]),Object(s.useEffect)((function(){j!==t&&(b(t),l.current.value=t)}),[t]),Object(h.jsx)("article",{className:"search-header",children:Object(h.jsxs)("form",{className:"filter",onSubmit:function(e){n(j),e.stopPropagation(),e.preventDefault()},children:[Object(h.jsx)(o.b,{className:"header-back",icon:"chevron-left",onClick:c}),Object(h.jsxs)("div",{className:"input-wrapper",children:[Object(h.jsx)(o.b,{icon:"search"}),Object(h.jsx)("input",{type:"text",ref:l,placeholder:"\u641c\u7d22\u97f3\u4e50\u3001\u89c6\u9891\u3001\u535a\u5ba2\u3001\u6b4c\u8bcd",onChange:function(e){b(e.target.value)}})]}),Object(h.jsx)("input",{type:"button",value:"\u641c\u7d22",className:"search-button",onClick:function(e){return n(j),!1}})]})})},f=r.a.memo(d),p=c(26),m=c(58),x=c.n(m),g=c(59),v=function(){var e=Object(s.useState)(!0),t=Object(a.a)(e,2),c=t[0],r=t[1],O=Object(s.useRef)(null),d=Object(i.g)(),m=Object(s.useState)(!0),v=Object(a.a)(m,2),k=v[0],y=v[1],C=Object(s.useState)(""),N=Object(a.a)(C,2),w=N[0],S=N[1],E=Object(l.c)(),T=Object(s.useState)(""),I=Object(a.a)(T,2),L=I[0],H=I[1],R=Object(l.d)((function(e){return e.Search})),A=R.hotKeyList,K=R.suggestObject,_=R.songsList,D=(R.enterLoading,Object(s.useRef)(null));Object(s.useEffect)((function(){E({type:p.b})}),[]),Object(s.useEffect)((function(){var e;null===(e=D.current)||void 0===e||e.refresh()}),[_]);var G=Object(s.useCallback)((function(){r(!1)}),[]),J=Object(s.useCallback)((function(e){E({type:p.c,payload:e})}),[]),U={handleCancel:G,handleSearch:J,setShowHotkey:y,HotKey:w},q=function(e){for(var t,c=e.target;1===c.nodeType&&"LI"!==c.tagName;)c=c.parentNode;var n=(null===(t=c.querySelector("span"))||void 0===t?void 0:t.innerText)||"";S(n),J(n)},B=function(e){H(e)},F=Object(s.useCallback)((function(e){d.push("/album/".concat(e))}),[]),P=function(e,t){E({type:"player/GET_SONG_DETAIL",payload:t.id})},z=Object(s.useCallback)((function(){if(k)return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h3",{style:{textIndent:"1em"},children:"\u70ed\u641c\u699c"}),Object(h.jsx)("ul",{className:"hotkey-wrapper",onClick:q,children:A.length>0&&A.map((function(e,t){var c=e.first;return Object(h.jsxs)("li",{children:[Object(h.jsx)("i",{children:t+1}),Object(h.jsx)("span",{children:c})]},c)}))})]})}),[A,k]),M=Object(s.useCallback)((function(){return Object(h.jsx)("div",{className:"scroll-w-wrapper",children:Object(h.jsx)(j.g,{ref:D,children:Object(h.jsx)(j.b,{songs:_,onClickCallback:P,showNum:!1})})})}),[_]),Q=Object(s.useCallback)((function(){return Object(h.jsx)(j.a,{data:K.playlists?K.playlists:[],onClickCallback:F})}),[K.playlists]),V=Object(s.useCallback)((function(){var e=K.artists;return e&&e.length?Object(h.jsx)("div",{className:"singer-wrapper",children:e.map((function(e,t){return Object(h.jsxs)("div",{className:"singer-item",onClick:function(){return d.push("/singers/".concat(e.id))},children:[Object(h.jsxs)("div",{className:"singer-left",children:[Object(h.jsx)("div",{className:"img_wrapper",children:Object(h.jsx)(x.a,{placeholder:Object(h.jsx)("img",{width:"100%",height:"100%",src:g.a,alt:"singer"}),children:Object(h.jsx)("img",{src:e.picUrl+"?param=300x300",width:"100%",height:"100%",alt:"music"})})}),Object(h.jsxs)("span",{className:"name",children:[" \u6b4c\u624b: ",e.name]})]}),Object(h.jsx)("div",{className:"singer-right",children:Object(h.jsx)(o.b,{icon:"chevron-right"})})]},t)}))}):Object(h.jsx)("h1",{children:"\u6682\u65e0\u6570\u636e"})}),[K.artists]),W=Object(s.useCallback)((function(){if(K.albums)return Object(h.jsx)("div",{style:{padding:"0 15%"},children:K.albums.map((function(e,t){var c=t%2?"right":"left";return Object(h.jsx)("h2",{style:{textAlign:c},children:e.name},e.id)}))})}),[K.albums]),X=Object(s.useCallback)((function(e){switch(e){case"\u6b4c\u66f2":return M();case"\u6b4c\u624b":return V();case"\u6b4c\u5355":return Q();case"\u4e13\u8f91":return W();default:return Object(h.jsx)("h1",{style:{textAlign:"center"},children:"\u529f\u80fd\u5f00\u53d1\u4e2d"})}}),[L,_,K]),Y=Object(s.useCallback)((function(){return Object(b.i)(K)?null:K.order?k?null:Object(h.jsx)("article",{className:"result-wrapper",children:Object(h.jsx)(o.f,{onTabClick:B,children:K.order.map((function(e){return Object(h.jsx)(o.f.Item,{label:e,children:X(e)},e)}))})}):null}),[_,_.length,K,K.order,k]);return Object(h.jsx)(u.a,{in:c,appear:!0,classNames:"common-fadeInUp",timeout:300,unmountOnExit:!0,onExited:function(){d.goBack(),E({type:p.a})},nodeRef:O,children:Object(h.jsxs)("section",{className:"search-container",ref:O,children:[Object(h.jsx)(f,Object(n.a)({},U)),z(),Y()]})})};t.default=r.a.memo(v)}}]);
//# sourceMappingURL=7.5efc42f0.chunk.js.map